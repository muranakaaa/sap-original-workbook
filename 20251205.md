## 一問一答
<details>
<summary>TTLは何の略？</summary>
Time To Live（生存時間）
</details>

<details>
<summary>Route 53 Resolverとは？</summary>
オンプレ ↔ AWS（VPC）の DNS を相互に解決できるようにするための仕組み
</details>

<details>
<summary>複数値回答ルーティングとは？</summary>
Route 53 が、複数の IP アドレスをランダムに返すことで簡易ロードバランシングを実現する DNS ルーティング方式。
</details>

<details>
<summary>DynamoDB 専用のインメモリキャッシュは何？</summary>
DynamoDB Accelerator（DAX）
</details>

<details>
<summary>DynamoDB Auto Scaling とは？</summary>
テーブルの Read/Write 容量（RCU/WCU）を自動調整してくれる仕組み。EC2 Auto Scaling は “冗長性向上" が主目的で、DynamoDB Auto Scaling は “スループット向上” が主目的。同じ Auto Scaling でも目的はまったく違う。
</details>

<details>
<summary>API Gateway の 使用量プラン（Usage Plan）のユースケース</summary>

- API を「料金プラン別」に提供したい（SaaS・外部向けAPI）
- IoT を「デバイス別」にアクセス制御したい
- 内部システムでも「暴走対策」として利用したい
- サービスの「無料枠」を作りたい

</details>

<details>
<summary>PrivateLinkはオンプレに関係する？</summary>
関係しない。オンプレ ↔ AWS は Site-to-Site VPN または Direct Connect。
PrivateLink は AWS VPC ↔ AWS VPC or サービス をインターネットを通らずサービス公開
</details>

## 1問目：API Gateway × Lambda × Aurora

ある国際配送会社は、AWS で配送管理システムを実行しています。システムは、Amazon API Gateway のリージョン API エンドポイントと AWS Lambda 関数を使用する Web アプリケーションで構成されています。Web アプリケーションのコンシューマはすべて、アプリケーションがデプロイされる AWS リージョンの近くにいます。Lambda 関数は、Amazon Aurora MySQL データベースのみをクエリします。ソリューションアーキテクトは、データベースに 3 つのリードレプリカを設定しました。テスト中、アプリケーションはパフォーマンス要件を満たしていましたが、高負荷状態では、アプリケーションは多数のデータベース接続を開きます。ソリューションアーキテクトは、アプリケーションのパフォーマンスを改善する必要があります。ソリューションアーキテクトは、これらの要件を満たすためにどのアクションを実行する必要がありますか。（2 つ選択してください）

- A. Aurora データベースのクラスターエンドポイントを使用します。
- B. RDS Proxy を使用して、Aurora データベースのリーダーエンドポイントの接続プールを設定します。
- C. Lambda プロビジョニング済み同時実行の機能を使用します。
- D. Lambda 関数でデータベース接続を開くためのコードをイベントハンドラの外部に移動します。
- E. API Gateway エンドポイントをエッジ最適化エンドポイントに変更します。

<details>
<summary>答え</summary>
B、D

- クラスターエンドポイントは writer（書き込み）に向けるもの。読み取りには読み取り専用のリーダーエンドポイントを設けてリードレプリカに接続させる。
- Auroraのエンドポイントの違いは以下。
  - https://qiita.com/pensuke628/items/5ca7f2d2a53a71528ad1
- Lambda プロビジョニング済み同時実行とは、常に起動済みの Lambda コンテナを確保しておく機能。コールドスタートをなくして、レスポンスを高速化してくれる。
- 今回の問題はDBの`max_connections`が問題。プロビジョニング済み同時実行はレイテンシの向上なので話が別。

</details>

## 2問目：Savins Plans

ある生命保険会社は、FISC に準拠した AWS のマルチアカウント基盤を利用しています。ワークロードは、マルチアカウント基盤上の Amazon EC2、AWS Fargate、AWS Lambda のコンピューティングリソース上で稼働しています。各コンピューティングリソースの使用量は、毎月変動します。この企業は、今後 3 年間でコンピューティングコストを最適化したいと考えています。ソリューションアーキテクトは、組織全体の各アカウントの 6 か月平均を取得して使用量を計算します。どのソリューションが、組織のすべてのコンピューティング使用量に対して最もコスト削減効果を発揮しますか。

- A. メンバーアカウントの最も一般的な EC2 インスタンスのサイズと数に合わせて、組織内にリザーブドインスタンスを購入します。
- B. 管理アカウントレベルの推奨事項を使用して、管理アカウントから組織の Compute Savings Plans を購入します。
- C. 過去 6 か月の EC2 使用状況データに基づいて、管理アカウントから各メンバーアカウントの EC2 Instance Savings Plans を購入します。

<details>
<summary>答え</summary>
B

- Compute SP と EC2 RI/SP の違いを知っているかどうかの問題
- 参考：https://business.ntt-east.co.jp/content/cloudsolution/ihcm_column-01.html
  - Compute Savings Plans：一番使い勝手が良いが割引率は最低
  - Instance Savings Plans：柔軟性も割引率もバランスが良い
  - Reserved Instance：ほぼ変更できない代わりに最大割引

</details>

## 3問目：ファイル共有システム
ある会社はデータ分析プラットフォームを使用しています。データ分析プラットフォームは、オンプレミスの Windows サーバ上に構築されています。分析データは Windows サーバ上で、毎日 5GB 生成されます。同社は、Windows 上のファイルの一部を AWS のファイルシステム上に移行および拡張することを計画しています。同社は既に、オンプレミスネットワークと AWS の間に AWS Direct Connect 接続を確立しています。会社はどのデータ移行戦略を使用する必要がありますか。

- A. AWS Storage Gateway のファイルゲートウェイオプションを使用して、既存の Windows ファイルサーバーを置き換え、既存のファイル共有を新しいファイルゲートウェイにポイントします。
- B. AWS DataSync を使用して、オンプレミスの Windows ファイルサーバーと Amazon FSx の間でデータをレプリケートする毎日のタスクをスケジュールします。
- C. AWS DataSync を使用して、オンプレミスの Windows ファイルサーバーと Amazon Elastic File System の間でデータをレプリケートする毎日のタスクをスケジュールします。

<details>
<summary>答え</summary>
B

- Storage Gateway は “オンプレとAWSをつなぐハイブリッドストレージ” 。つまり、Storage Gateway は「オンプレの継続利用」が前提
- Windows と Linux の世界はファイル共有プロトコルが違い、互換性がないことを理解しているかどうかの問題。
- EFS は Linux 用の NFS ファイルシステム。問題の Windows ファイルサーバとの互換性がない
- Windows は SMB（Server Message Block） という方式でファイル共有する
  - 「server」というホストの「share」共有フォルダに接続
  - 例：`\\server\share`
- Linux は NFS という方式でファイル共有する
  - リモートのフォルダを自分のフォルダとして扱う（＝マウントする）
  - 例：`sudo mount -t nfs nfs-server:/export/data /mnt/data`

</details>

## 4問目：DR戦略
ある小売会社は、複数の AWS リージョンで e コマースサイトをホストしています。同社は、オンライン購入のためにウェブサイトを常時稼働させたいと考えています。ウェブサイトは、Amazon RDS for MySQL DB インスタンスにデータを保存します。データベースに対して 最も高い可用性 を提供するソリューションを選択してください。

- A. Amazon RDS で自動バックアップを設定します。障害が発生した場合は、自動バックアップをスタンドアロン DB インスタンスに昇格させます。昇格した DB インスタンスにデータベースのトラフィックを送信します。昇格した DB インスタンスをソースとする代替のリードレプリカを作成します。
- B. Amazon RDS で Global Database とリードレプリカを設定します。クロスリージョンスコープを有効にします。障害が発生した場合は、AWS Lambda を使用して、リードレプリカをあるリージョンから別のリージョンにコピーします。
- C. Amazon RDS でリードレプリカを設定します。障害が発生した場合は、クロスリージョンリードレプリカをスタンドアロン DB インスタンスに昇格させます。昇格した DB インスタンスにデータベースのトラフィックを送信します。昇格した DB インスタンスをソースとする代替のリードレプリカを作成します。

<details>
<summary>答え</summary>
C
  
- RDS MySQLに Global Database は存在しない
- Global 〇〇
  - Global Database → Aurora
  - Global Tables → DynamoDB
- DR戦略については以下を参考に
  - https://qiita.com/dodonki1223/items/6c26c08fb1466c1c588f

</details>
