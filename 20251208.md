## 一問一答
<details>
<summary>プレースホルダとは？</summary>
プレースホルダは「危険な値を直接書かず、安全に後から埋め込むための仕組み」。SQLインジェクション対策では“クエリと値を分離”する最重要手法。AWS では機密値を隠すために使う。
</details>


<details>
<summary>API Gateway オーソライザとは？</summary>
API の前で認証・認可を行い、不正リクエストを通さないフィルタ。Lambda・JWT・IAM の3方式があり、用途に応じて選ぶ。
</details>


<details>
<summary>Windows Serverとは？</summary>

個人向け Windows には無い 企業用のサーバー機能 が入っている。見た目は Windows に似ているけれど、会社全体をまとめて管理する専用の機能が入っている。特に有名なのが以下。

```sh
● Active Directory （AD DS）
→ 社員アカウント管理、ログイン管理、グループ管理
→ 大企業・学校・官公庁ほぼすべてが使用

● DNS サーバー
→ ドメイン名の解決（AD の心臓部）

● DHCP（オプション）
→ IPアドレスの自動配布

● DNS サーバー
→ データベース専用サーバーソフト

● ファイルサーバー
→ 社内共有フォルダ

● Hyper-V
→ 仮想化機能（UTM のようなもの）
```

- Windows 10 / 11 → 個人向けPC OS  
- Windows Server → 企業のネットワークを支えるサーバー用 OS
- サーバーOSとクライアントOSの違いは以下を参照
     - https://www.winserver.ne.jp/column/about_serveros-clientos/

</details>

<details>
<summary>Active Directory Connectorとは？</summary>
Active Directory のユーザー情報を、クラウド側にも自動で同期してくれる仕組み。オンプレAD にアカウントを作れば、クラウドにも反映されるようにする「同期の中間役」。
</details>

<details>
<summary></summary>
</details>

<details>
<summary></summary>
</details>

<details>
<summary></summary>
</details>

## 1問目：EBSの暗号化

ある企業では、多数の Amazon EC2 インスタンスに 暗号化されていない Amazon EBS ボリューム が接続されていることがセキュリティ監査で判明しました。ソリューションアーキテクトは、次の2つを求められています。
- 既存の暗号化されていない EBS ボリュームを暗号化すること
- 今後、新しく作られる EBS ボリュームが暗号化されていない状態にならないようにすること

これらの要件を満たすために、ソリューションアーキテクトはどちらの手順を実行する必要がありますか？

- A. AWS CLI で暗号化されていない既存ボリュームを検出し、そのまま暗号化するスクリプトを実行する。
- B. 暗号化されていない各ボリュームからスナップショットを作成し、そのスナップショットから 暗号化された新しい EBS ボリューム を作成して既存ボリュームと入れ替える。さらに、EBS のデフォルト暗号化（Default EBS Encryption）を有効にする。

<details>
<summary>答え</summary>
A,C

- CLI から 既存の EBS ボリュームを直接暗号化する API は存在しない。

```sh
非暗号化ボリューム
     ↓ snapshot
暗号化された snapshot
     ↓ create-volume
暗号化されたボリューム（新しいディスク）
```

</details>

## 2問目：EBSの暗号化

ある企業が、AWS アカウント内の数千台の Amazon EC2 インスタンスにアプリケーションをデプロイしています。セキュリティ監査により、暗号化されていない Amazon Elastic Block Store (Amazon EBS) ボリュームが EC2 インスタンスにアタッチされていることが判明しました。同社のセキュリティポリシーでは、EBS ボリュームは暗号化されている必要があります。

同社は、EBS ボリュームを暗号化する自動化ソリューションを導入する必要があります。また、開発チームが暗号化されていない EBS ボリュームを作成できないようにする必要があります。

これらの要件を満たすソリューションとして、Cが正解な理由を答えてください。

- A. AWS Systems Manager Fleet Manager を使用して、暗号化されていない EBS ボリュームのリストを作成します。新しい暗号化された EBS ボリュームを作成する手順を含む Systems Manager オートメーションランブックを作成します。暗号化されていない EBS ボリュームの作成を拒否する SCP を作成します。
- B. AWS Systems Manager Fleet Manager を使用して、暗号化されていない EBS ボリュームのリストを作成します。新しい暗号化された EBS ボリュームを作成する手順を含む Systems Manager オートメーションランブックを作成します。暗号化されていない EBS ボリュームを常に暗号化するように、EBS 暗号化の AWS アカウント設定を変更します。
- C（正解）. 暗号化されていない EBS ボリュームを識別する AWS Config マネージドルールを設定します。自動復元アクションを設定します。新しい暗号化された EBS ボリュームを作成する手順を含む AWS Systems Manager オートメーションランブックを関連付けます。新しい EBS ボリュームを常に暗号化するように、EBS 暗号化の AWS アカウント設定を変更します。

<details>
<summary>答え</summary>

- Fleet Manager：サーバーをまとめて可視化・操作する管理ツール
- オートメーションランブック：EBS 暗号化などを自動で実行する手順書（自動化エンジン）
- Aの選択肢
     - 要件を満たしていない
     - SCP は条件付き（暗号化されていない EBS のみ拒否）ができない
- Bの選択肢
     - 要件を満たしていない

</details>

## 3問目：ログ監視

ある企業では、Application Load Balancer (ALB) の背後にある Amazon EC2 インスタンスにデプロイされたアプリケーションがあります。インスタンスは Auto Scaling グループに属しています。このアプリケーションには予測不可能なワークロードがあり、頻繁にスケールアウトとスケールインが行われます。同社の開発チームは、アプリケーションのログを分析して、アプリケーションのパフォーマンスを改善する方法を見つけたいと考えています。しかし、インスタンスがスケールインすると、ログは利用できなくなります。

スケールインイベント後にアプリケーションログを表示できるようにするソリューションを選択してください。

- A. ALB のアクセスログを有効にします。ログを Amazon S3 バケットに保存します。
- B. 統合 CloudWatch エージェントを使用して、Amazon CloudWatch Logs にログを公開するように EC2 インスタンスを設定します。
- C. AWS X-Ray トレースを使用してアプリケーションを計測します。

<details>
<summary>答え</summary>
B

- ALB アクセスログは クライアント → アプリケーションまでの HTTP リクエスト情報。アプリケーションの内部まではログが取れない。
- X-Ray はアプリの動作経路（トレース）を記録するツールであり、アプリケーションログとは全く別物。
  - オブザーバビリティを実現するサービスでもあるな。今までの監視は事故ってからじゃないと動けなかったんやけど、事故る前に気づこうよって考え方。

</details>
